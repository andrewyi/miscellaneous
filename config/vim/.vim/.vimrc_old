" andrew's vimrc

set tabstop=4
set shiftwidth=4
set expandtab
set autoindent
set hlsearch
set wrap
set nu
set nocompatible

set fileencodings=utf8,cp936
set encoding=utf8

syntax enable
syntax on
colorscheme desert

nmap <silent><C-J> <C-E>j
nmap <silent><C-K> <C-Y>k
" nmap <silent><S-TAB> :tabnext<CR>
" imap <silent><S-TAB> <C-C>:tabnext<CR>
nmap <silent><TAB>h :tabprev<CR>
nmap <silent><TAB>l :tabnext<CR>
nmap qq :q<CR>
" nmap <silent><F12> :Project<CR>
nmap <silent> <F12> <Plug>ToggleProject
nmap <silent> <C-N> :tabnew<CR>
nmap <silent> <C-P> <F12>
nmap <silent> <C-Q> :q<CR>
nmap <silent> <F11> :NERDTreeToggle<CR>

" let mapleader = ";"

" set diffexpr=MyDiff()
" function MyDiff()
"   let opt = '-a --binary '
"   if &diffopt =~ 'icase' | let opt = opt . '-i ' | endif
"   if &diffopt =~ 'iwhite' | let opt = opt . '-b ' | endif
"   let arg1 = v:fname_in
"   if arg1 =~ ' ' | let arg1 = '"' . arg1 . '"' | endif
"   let arg2 = v:fname_new
"   if arg2 =~ ' ' | let arg2 = '"' . arg2 . '"' | endif
"   let arg3 = v:fname_out
"   if arg3 =~ ' ' | let arg3 = '"' . arg3 . '"' | endif
"   let eq = ''
"   if $VIMRUNTIME =~ ' '
"     if &sh =~ '\<cmd'
"       let cmd = '""' . $VIMRUNTIME . '\diff"'
"       let eq = '"'
"     else
"       let cmd = substitute($VIMRUNTIME, ' ', '" ', '') . '\diff"'
"     endif
"   else
"     let cmd = $VIMRUNTIME . '\diff'
"   endif
"   silent execute '!' . cmd . ' ' . opt . arg1 . ' ' . arg2 . ' > ' . arg3 . eq
" endfunction

" project setttings
let g:proj_flags="imstvcg"

"bufexplorer
let g:bufExplorerDefaultHelp=0       " Do not show default help.
let g:bufExplorerShowRelativePath=1  " Show relative paths.
let g:bufExplorerSortBy='mru'        " Sort by most recently used.
let g:bufExplorerSplitRight=0        " Split left.
let g:bufExplorerSplitVertical=1     " Split vertically.
let g:bufExplorerSplitVertSize = 30  " Split width
let g:bufExplorerUseCurrentWindow=1  " Open in new window.
autocmd BufWinEnter \[Buf\ List\] setl nonumber 
nmap <F10> \bv

if !has("unix")
    if has("gui_running")
        set guioptions -=m
        set guioptions -=T
    endif
endif

nmap <SILENT> <F9> :lcd %:p:h<CR>
nmap <F5> :edit!<CR>

